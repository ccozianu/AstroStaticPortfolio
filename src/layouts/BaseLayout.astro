---
import "../styles/global.css";

const { frontmatter } = Astro.props;
const { title, heading, tagline, avatarUrl, socialLinks } =
    frontmatter || Astro.props;
---

<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>{title}</title>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400&family=VT323&display=swap"
            rel="stylesheet"
        />
    </head>
    <body>
        <div class="scanlines"></div>

        <div class="container">
            <nav class="cassette-nav">
                <button
                    class="nav-toggle"
                    id="navToggle"
                    aria-label="Toggle Menu">...</button
                >
                <div class="nav-content" id="navContent">
                    <ul class="nav-links">
                        <li><a href="/">Home</a></li>
                        <li><a href="/projects">Projects</a></li>
                        <li><a href="/blog">Blog</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </div>
            </nav>

            <header class="bio-header">
                <img src={avatarUrl} alt="Profile Avatar" class="avatar" />
                <h1>{heading}</h1>
                <p class="tagline">{tagline}</p>
            </header>

            <div class="content-body">
                <slot />
            </div>

            <section class="content-section" id="contact">
                <h2>Connect</h2>
                <ul class="links-list">
                    {
                        socialLinks &&
                            socialLinks.map((link) => (
                                <li>
                                    <a href={link.url} class="btn">
                                        {link.text}
                                    </a>
                                </li>
                            ))
                    }
                </ul>
            </section>

            <footer class="footer">
                <p>&copy; 2025 Built with Astro and Solarized Love.</p>
            </footer>
        </div>

        <script>
            const navToggle = document.getElementById("navToggle");
            const navContent = document.getElementById("navContent");
            const navLinks = document.querySelectorAll(".nav-links a");

            if (navToggle && navContent) {
                navToggle.addEventListener("click", () => {
                    navContent.classList.toggle("active");
                });

                // Close menu when a link is clicked
                navLinks.forEach((link) => {
                    link.addEventListener("click", () => {
                        navContent.classList.remove("active");
                    });
                });

                // Close menu when clicking outside
                document.addEventListener("click", (e) => {
                    const target = e.target as Node;
                    if (
                        !navContent.contains(target) &&
                        !navToggle.contains(target)
                    ) {
                        navContent.classList.remove("active");
                    }
                });
            }
        </script>
    </body>
</html>
